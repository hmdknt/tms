:imagesdir: images

[[Sec020_BD_functionspec_login]]
=== ログイン機能
==== 機能概要
ActiveDirectoryに対応したシステムへのログイン機能。 +
ActiveDirectoryで認証処理後、本システム内での権限情報（ROLE）と共に認証情報をセッション情報に保持する。

==== シーケンス図
image::Sec020_BD_functionspec_login_sequence.png[]


==== 機能説明
. クライアントよりログイン要求リクエストを行う。この際にユーザー/パスワードを入力として受け取る。
. ユーザー/パスワードを元にActiveDirectoryに対して問い合わせを行う。
. 問い合わせ結果が正常に取得できた場合（認証エラーにならない場合）には、
本システムとしてのユーザー情報の有無を確認し権限を取得する。
本システムとしてのユーザーが存在しない場合には、初回アクセス時のユーザー登録処理を行う。
. 本システムのユーザー情報および権限情報を認証キャッシュとしてキャッシュサーバーへ登録する。
認証キャッシュの有効期間（TTL）は``0.25H（15分間）``とする。
. ログインが正常に行えたことをユーザーへ通知する。この際認証キャッシュのキーをクライアントへ返却すること。
